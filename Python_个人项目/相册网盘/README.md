# 相册网盘

一个基于Flask的图片管理和展示系统，支持图片上传、分类、评分和标签管理功能。

## 功能特点

- **图片上传**：支持多种图片格式上传（JPEG、PNG、GIF、WebP等）
- **图片展示**：响应式网格布局展示图片库
- **标签管理**：为图片添加、编辑和删除标签
- **评分系统**：对图片进行0-5星评分
- **分类浏览**：按标签或评分筛选图片
- **图片详情**：点击图片查看大图和详细信息
- **分页功能**：自动分页展示大量图片
- **数据库存储**：使用SQLite存储图片数据和元数据
- **触摸支持**：支持滑动手势在图片详情页切换图片

## 技术架构

- **后端**：Flask Web框架
- **数据库**：SQLite
- **前端**：HTML、CSS、JavaScript
- **模板引擎**：Jinja2

## 数据库结构

项目使用SQLite数据库，包含以下表：

- `images`：存储图片信息（ID、文件名、二进制数据、评分）
- `tags`：存储标签信息（ID、标签名）
- `image_tags`：图片与标签的多对多关系表

## 安装和运行

1. **安装依赖**
   ```bash
   pip install flask
   ```

2. **运行应用**
   ```bash
   python app.py
   ```

3. **访问应用**
   打开浏览器访问 `http://localhost:5000`

## 使用说明

### 主页功能

- **图片浏览**：以网格形式展示所有图片
- **标签筛选**：点击标签查看特定分类的图片
- **精选图片**：查看评分5分及以上的图片
- **上传图片**：通过上传表单添加新图片
- **管理标签**：添加或删除标签

### 图片详情页功能

- **大图查看**：点击图片进入详情页查看大图
- **评分功能**：点击星星为图片评分（0-5分）
- **标签管理**：编辑图片的标签
- **图片删除**：删除不需要的图片
- **图片导航**：通过左右箭头或滑动手势浏览相邻图片

### 标签管理

- **添加标签**：在标签管理界面添加新标签
- **删除标签**：删除不需要的标签（会从所有图片中移除）
- **标签筛选**：通过标签快速查找相关图片

## API接口

项目提供以下API接口：

- `GET /` - 主页，展示所有图片
- `GET /page/<int:page>` - 分页展示图片
- `GET /tag/<tag_name>` - 按标签展示图片
- `GET /tag/<tag_name>/page/<int:page>` - 按标签分页展示图片
- `GET /featured` - 展示评分5分及以上的精选图片
- `GET /featured/page/<int:page>` - 精选图片分页
- `GET /image/<int:image_id>` - 图片详情页
- `GET /image_data/<int:image_id>` - 获取图片二进制数据
- `GET /api/image_details/<int:image_id>` - 获取图片详细信息
- `POST /api/update_score/<int:image_id>` - 更新图片评分
- `POST /api/update_tags/<int:image_id>` - 更新图片标签
- `GET /api/all_tags` - 获取所有标签
- `POST /api/upload_image` - 上传图片
- `DELETE /api/delete_image/<int:image_id>` - 删除图片
- `POST /api/add_tag` - 添加标签
- `DELETE /api/delete_tag/<int:tag_id>` - 删除标签

## 文件结构

```
相册网盘/
├── app.py              # Flask应用主文件
├── data.db             # SQLite数据库文件（运行后自动生成）
├── static/             # 静态资源
│   ├── style.css       # 样式文件
│   ├── script.js       # 主页JavaScript
│   └── image_detail.js # 图片详情页JavaScript
└── templates/          # HTML模板
    ├── index.html      # 主页模板
    └── image_detail.html # 图片详情页模板
```

## 响应式设计

项目采用响应式设计，支持各种设备：

- 桌面端：充分利用屏幕空间展示图片
- 移动端：适配小屏幕，优化触摸操作
- 平板端：平衡显示效果和操作便利性

## 扩展建议

- 增加用户认证系统
- 添加图片搜索功能
- 实现图片批量操作
- 增加图片分类文件夹功能
- 添加图片压缩和优化功能
- 支持更多图片格式
- 增加分享功能
- 添加图片编辑功能

## 许可证

此项目为个人项目，仅供学习和参考使用。