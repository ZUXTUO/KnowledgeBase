# AI记忆存储系统

一个基于向量数据库的AI记忆存储与检索系统，能够为AI对话提供长期记忆功能，使AI能够记住历史对话内容并基于记忆进行更智能的回复。

## 功能特性

- **向量数据库存储**：使用Milvus作为向量数据库，存储对话内容的向量表示
- **语义检索**：基于语义相似度搜索相关历史对话，而非简单的关键词匹配
- **多用户支持**：支持多个用户独立的记忆空间，互不干扰
- **Web界面**：提供美观的Web聊天界面，支持用户切换和记忆管理
- **上下文感知**：AI回复时会参考检索到的相关历史对话
- **记忆管理**：支持查看、删除和清除记忆功能

## 技术架构

- **后端框架**：Flask Web框架
- **向量模型**：SentenceTransformer (google/embeddinggemma-300m)
- **向量数据库**：MilvusClient (本地模式)
- **前端技术**：HTML/CSS/JavaScript，响应式设计
- **API接口**：与本地AI服务接口通信 (如ChatGPT等)

## 文件说明

- `mem.py`：主程序文件，实现完整的AI记忆存储系统
- `test_chatgpt_web.py`：基础AI聊天界面的测试文件
- `test_emb.py`：向量嵌入和语义相似度测试脚本

## 安装依赖

```bash
pip install flask requests pymilvus sentence-transformers
```

## 使用方法

1. 确保本地AI服务运行在 `http://127.0.0.1:8765` 端点
2. 运行主程序：
   ```bash
   python mem.py
   ```
3. 访问 `http://127.0.0.1:5000` 打开Web界面
4. 设置用户名后即可开始对话

## 工作原理

1. **记忆存储**：每次对话内容会被转换为向量并存储到Milvus数据库中
2. **语义检索**：当用户发送新消息时，系统会搜索语义相似的历史对话
3. **上下文增强**：将检索到的相关历史作为上下文传递给AI模型
4. **智能回复**：AI基于历史记忆生成更连贯、个性化的回复

## 应用场景

- 个人AI助手，能够记住用户偏好和历史对话
- 客服机器人，可以调用历史服务记录
- 教育助手，跟踪学生的学习进度和问题
- 智能对话系统，提供更自然的长期对话体验

## 注意事项

- 首次运行会自动创建向量数据库文件
- 向量模型首次加载可能需要较长时间（约1-2分钟）
- 本地AI服务需要预先配置好并保持运行状态
- 记忆检索基于语义相似度，可能不完全准确